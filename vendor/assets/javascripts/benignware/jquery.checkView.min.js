
(function(f,c){console.info("init checkview plugin");var e="checkView";var g={containerClass:"checkview",iconClass:"icon-ok",autoSubmit:true};function a(k,h){if(h==k){return false}var j=k;try{while(j){if(k.ownerDocument!=null&&j==k.ownerDocument.documentElement){return false}if(j.parentNode==h){return true}if(j.parentNode==null){return false}j=j.parentNode}}catch(i){}return false}var b=function d(m,u){var h="click";var n=this;var r=m.ownerDocument;var i=f(m);m.tabIndex="-1";m.style.position="absolute";m.style.width="0";m.style.height="0";var p=f(m).next();var k=f(m).prev();var s=p&&p.tagName=="input"&&p.type=="hidden"?p:k&&k.tagName=="input"&&k.type=="hidden"?k:null;var q=f(m).parents("."+u.containerClass)[0];if(!q){q=r.createElement("span");m.parentNode.insertBefore(q,m)}q.tabIndex="0";q.className=u.containerClass;q.style.display="inline-block";q.style.lineHeight="0";q.style.cursor="pointer";var j=r.createElement("i");j.style.margin="0";j.className=u.iconClass;q.appendChild(j);function l(){m.checked=!m.checked;n.invalidate()}function t(){if(!m.value){m.value="on"}m.style.visibility="hidden";q.appendChild(m);j.style.verticalAlign="top";var v;f(q).bind("keypress",function(y){if(y.which==32){m.checked=!m.checked;n.invalidate()}if(y.which==13&&u.autoSubmit){if(m.form){m.form.submit()}}});f(m).bind("change",function(y){n.invalidate();c.clearTimeout(x)});f(q).parents("label").bind("click",function(y){if(y.target!=m&&y.target!=q&&!a(y.target,q)){y.stopImmediatePropagation();f(q).trigger("click")}});var x=null;function w(){m.checked=!m.checked;f(m).trigger("change")}f(q).bind("click",function(y){if(y.target!=m){c.clearTimeout(x);x=c.setTimeout(function(){w()},100);y.preventDefault()}});f(c).bind("resize",function(){n.invalidate()});this.invalidate()}function o(){if(m.checked){f(q).addClass("checked")}else{f(q).removeClass("checked")}j.style.visibility=m.checked?"":"hidden";j.style.position="relative";j.style.left=((f(q).width()-f(j).width())/2)+"px";j.style.top=((f(q).height()-f(j).height())/2)+"px"}this.setChecked=function(v){m.checked=v;if(v){f(m).attr("checked","checked")}else{f(m).removeAttr("checked")}this.invalidate()};this.isChecked=function(){return f(m).is(":checked")};this.invalidate=function(){o.call(this)};t.call(this)};f.fn[e]=function(h){h=f.extend({},g,h);return this.each(function(){if(!f(this).data(e)){f(this).data(e,new b(this,h))}return f(this)})}})(jQuery,window);